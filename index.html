<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport"content="width=device-width, initial-scale=1.0"><title>Markdown文档</title><link rel="preconnect"href="https://fontsapi.zeoseven.com"crossorigin/><link rel="stylesheet"href="https://fontsapi.zeoseven.com/94/main/result.css"onerror="this.href='https://fontsapi-storage.zeoseven.com/94/main/result.css'"/><style>:root{--primary-color:#0366d6;--bg-color:#f8f9fa;--border-color:#e1e4e8;--text-color:#333;--light-text:#666;--error-color:#d73a49;--hover-bg:#f6f8fa;--active-bg:rgba(3,102,214,0.1);--heading-border:#eaecef;--code-bg:#f6f8fa;--blockquote-bg:#f5f0e6;--blockquote-border:#f5f0e6;--nested-blockquote-bg:#ede4d4;--table-border:#ddd;--table-header-bg:#f2f2f2;--inline-code-bg:rgba(175,184,193,0.2)}.dark-mode{--primary-color:#58a6ff;--bg-color:#22272e;--border-color:#444c56;--text-color:#adbac7;--light-text:#768390;--error-color:#f47067;--hover-bg:rgba(88,166,255,0.1);--active-bg:rgba(88,166,255,0.1);--heading-border:#444c56;--code-bg:#2d333b;--blockquote-bg:#373e47;--blockquote-border:#545d68;--nested-blockquote-bg:#2d333b;--table-border:#444c56;--table-header-bg:#2d333b;--inline-code-bg:rgba(99,110,123,0.4)}body{font-family:"LXGW WenKai Mono GB";font-weight:normal;line-height:1.6;color:var(--text-color);margin:0;padding:0;display:grid;grid-template-columns:minmax(200px,250px)minmax(300px,1fr)minmax(200px,250px);min-height:100vh;font-size:1.8rem}.dark-mode body{background-color:#1c2128}#file-list,#toc{position:fixed;top:0;background-color:var(--bg-color);padding:20px;box-sizing:border-box;z-index:100}#file-list{left:0;width:250px;height:100vh;overflow-y:auto;border-right:1px solid var(--border-color)}#toc {
    right: 0;
    width: 250px;
    height: 100vh;
    overflow: hidden; 
    border-left: 1px solid var(--border-color);
}

#toc-list {
    max-height: calc(100vh - 60px);
    overflow-y: auto; 
    padding-right: 10px;
    margin: 0;
    padding-left: 0;
}#file-list h2,#toc h2{font-size:1.2em;margin:0 0 15px 0;padding:0;text-align:center}#file-list ul,#toc ul{list-style:none;padding:0;margin:0}#file-list li,#toc li{margin:0;line-height:1}#file-list a,#toc a{color:var(--light-text);text-decoration:none;display:block;padding:5px 8px;border-radius:4px}#file-list a:hover,#file-list a.active,#toc a:hover{color:var(--primary-color);background-color:var(--hover-bg)}#toc a.active{font-weight:bold;color:var(--primary-color);background-color:var(--active-bg)}#toc li.h1{padding-left:0;font-size:1em}#toc li.h2{padding-left:15px;font-size:0.9em}#toc li.h3{padding-left:30px;font-size:0.8em}#content{grid-column:2;padding:20px 40px;width:100%;max-width:1200px;min-width:300px;margin:0 auto;box-sizing:border-box}.markdown-file{margin-bottom:40px}.file-title{font-size:1.8em;color:var(--text-color);margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid var(--border-color)}.dark-mode.file-title{color:#cdd9e5}.loader{border:3px solid#f3f3f3;border-top:3px solid#3498db;border-radius:50%;width:20px;height:20px;animation:spin 1s linear infinite;display:inline-block;margin-right:10px}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.loading-container{display:flex;align-items:center;justify-content:center;height:100px}h1,h2,h3,h4,h5,h6{margin-top:1.5em;margin-bottom:0.5em;font-weight:600;line-height:1.25;scroll-margin-top:20px}h1{font-size:2em;border-bottom:1px solid var(--heading-border);padding-bottom:0.3em}h2{font-size:1.5em;border-bottom:1px solid var(--heading-border);padding-bottom:0.3em}h3{font-size:1.25em}h4{font-size:1em}h5{font-size:0.875em}h6{font-size:0.85em;color:#6a737d}img{max-width:100%}table{border-collapse:collapse;width:100%;margin:20px 0}th,td{border:1px solid var(--table-border);padding:8px;text-align:left}th{background-color:var(--table-header-bg)}pre{background-color:var(--code-bg);border-radius:6px;padding:16px;overflow:auto;border:1px solid var(--border-color);margin:20px 0;line-height:1.45;font-family:"SFMono-Regular",Consolas,"Liberation Mono",Menlo,monospace}code:not(pre code){font-family:"SFMono-Regular",Consolas,"Liberation Mono",Menlo,monospace;font-size:85%;background-color:var(--inline-code-bg);border-radius:6px;padding:0.2em 0.4em;margin:0;border:none}pre code{background-color:transparent;padding:0;border-radius:0;border:none;color:inherit}ul,ol{padding-left:1.5em;margin:1em 0}li{margin:0.5em 0;line-height:1.7}blockquote{margin:1em 0;padding:0.8em 1em;color:var(--light-text);border-left:4px solid var(--blockquote-border);background-color:var(--blockquote-bg);border-radius:0 6px 6px 0;font-size:0.95em}blockquote p{margin:0.5em 0;line-height:1.6}blockquote blockquote{background-color:var(--nested-blockquote-bg);border-left-color:var(--nested-blockquote-bg)}blockquote pre,blockquote code{background-color:rgba(175,184,193,0.15)!important}html{scroll-behavior:smooth}.code-container{margin:20px 0;border:1px solid var(--border-color);border-radius:6px;overflow:hidden}.code-tabs{display:flex;background-color:var(--bg-color);border-bottom:1px solid var(--border-color);padding:0 10px}.code-tab{padding:8px 15px;cursor:pointer;font-family:"SFMono-Regular",Consolas,"Liberation Mono",Menlo,monospace;font-size:0.9em;color:var(--light-text);border-bottom:2px solid transparent;margin-bottom:-1px}.code-tab:hover{color:var(--primary-color)}.code-tab.active{color:var(--primary-color);border-bottom-color:var(--primary-color);font-weight:bold}.code-content{display:none}.code-content.active{display:block}.code-content pre{margin:0;border-radius:0;border:none}.mobile-menu-btn{display:none;position:fixed;top:15px;left:15px;z-index:101;background:white;border:none;font-size:24px;cursor:pointer;padding:8px;color:#333;width:40px;height:40px;border-radius:50%;box-shadow:0 2px 5px rgba(0,0,0,0.2);align-items:center;justify-content:center}.mobile-menu-btn:hover{background:#f5f5f5}.dark-mode-toggle{position:absolute;top:15px;right:15px;background:none;border:none;cursor:pointer;font-size:0.7em;color:var(--light-text);z-index:101;padding:5px;border-radius:4px}.dark-mode-toggle:hover{color:var(--primary-color);background-color:var(--hover-bg)}@media(max-width:1200px){body{grid-template-columns:minmax(200px,250px)minmax(300px,1fr)}#toc{display:none}#content{max-width:900px}}@media(max-width:992px){#content{max-width:700px}}@media(max-width:768px){body{grid-template-columns:1fr;font-size:1.4rem}#file-list{transform:translateX(-100%)}#file-list.active{transform:translateX(0)}#content{grid-column:1;padding:15px;margin-top:40px;width:100%;max-width:100%;overflow-x:hidden;word-wrap:break-word}#toc{display:none}pre{max-width:100%;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word}img{max-width:100%;height:auto}.mobile-menu-btn{display:flex}}</style><!--预加载关键资源--><link rel="preload"href="https://cdn.jsdelivr.net/npm/marked/marked.min.js"as="script"></head><body><button id="file-list-btn"class="mobile-menu-btn"aria-label="切换菜单">☰</button><div id="file-list"><button id="dark-mode-toggle"class="dark-mode-toggle"aria-label="切换暗黑模式">🌙</button><h2>文档列表</h2><ul id="files"><li class="loading-item">加载中...</li></ul><ul><li><a href="/"style="margin-top: 20px; color: var(--primary-color);">返回首页</a></li></ul></div><div id="content"><div id="markdown-content"><div class="loading-container"><div class="loader"></div><span>正在加载文档...</span></div></div></div><div id="toc"><h2>目录</h2><ul id="toc-list"></ul></div><script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script><script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script><script>const MarkdownViewer=(function(){const GITHUB_API_URL='https://api.github.com/repos/yimingriyue/docs/contents/docs';const SCROLL_DEBOUNCE_TIME=100;const FETCH_TIMEOUT=5000;const state={currentFile:null,fileCache:new Map(),scrollTimeout:null,isMobileMenuOpen:false,lastActiveHeading:null};const elements={fileList:document.getElementById('file-list'),fileListBtn:document.getElementById('file-list-btn'),filesContainer:document.getElementById('files'),content:document.getElementById('content'),markdownContent:document.getElementById('markdown-content'),tocList:document.getElementById('toc-list'),darkModeToggle:document.getElementById('dark-mode-toggle')};async function init(){setupMarked();setupEventListeners();await loadInitialFile();handleInitialHash();setupDarkMode()}function setupMarked(){marked.setOptions({gfm:true,tables:true,breaks:true,pedantic:false,sanitize:false,smartLists:true,smartypants:false})}function setupEventListeners(){document.body.addEventListener('click',handleClick);window.addEventListener('scroll',debounce(highlightVisibleHeading,SCROLL_DEBOUNCE_TIME));window.addEventListener('popstate',handlePopState);window.addEventListener('resize',debounce(handleResize,200))}function debounce(fn,delay){let timer;return function(){const context=this;const args=arguments;clearTimeout(timer);timer=setTimeout(()=>fn.apply(context,args),delay)}}function handleClick(e){if(e.target.closest('#files a')){handleFileClick(e)}else if(e.target.closest('#toc a')){handleTocClick(e)}else if(e.target===elements.fileListBtn){toggleFileList()}else if(e.target.closest('#content')&&state.isMobileMenuOpen){closeFileList()}else if(e.target===elements.darkModeToggle){toggleDarkMode()}}function handleFileClick(e){e.preventDefault();const fileToLoad=e.target.dataset.file;if(state.currentFile===fileToLoad)return;loadAndDisplayMarkdown(fileToLoad);updateActiveFileLink(e.target);closeFileList()}function handleTocClick(e){e.preventDefault();const id=e.target.getAttribute('href').substring(1);const heading=document.getElementById(id);if(heading){scrollToHeading(heading);setActiveTocItem(e.target)}}async function handlePopState(){const file=getCurrentFileFromURL();if(file&&file!==state.currentFile){await loadAndDisplayMarkdown(file)}}function handleResize(){if(window.innerWidth>=768&&state.isMobileMenuOpen){closeFileList()}}async function loadInitialFile(){const files=await getMarkdownFiles();if(files.length>0){const initialFile=getInitialFileFromURL()||files[0];await loadAndDisplayMarkdown(initialFile)}}function getCurrentFileFromURL(){const urlParams=new URLSearchParams(window.location.search);return urlParams.get('file')}function getInitialFileFromURL(){return getCurrentFileFromURL()}function handleInitialHash(){if(window.location.hash){setTimeout(()=>{const target=document.getElementById(window.location.hash.substring(1));target&&scrollToHeading(target)},300)}}function setupDarkMode(){const prefersDark=window.matchMedia('(prefers-color-scheme: dark)').matches;const savedMode=localStorage.getItem('darkMode');if(savedMode==='dark'||(savedMode===null&&prefersDark)){document.documentElement.classList.add('dark-mode');elements.darkModeToggle.textContent='☀️'}else{elements.darkModeToggle.textContent='🌙'}}function toggleDarkMode(){const isDark=document.documentElement.classList.toggle('dark-mode');localStorage.setItem('darkMode',isDark?'dark':'light');elements.darkModeToggle.textContent=isDark?'☀️':'🌙'}async function getMarkdownFiles(){const response=await fetchWithTimeout(GITHUB_API_URL,{headers:{'Accept':'application/vnd.github.v3+json'}},FETCH_TIMEOUT);if(!response.ok){throw new Error(`HTTP错误!状态码:${response.status}`)}const files=await response.json();return files.filter(file=>file.name.endsWith('.md')).map(file=>file.name).sort((a,b)=>{const numA=parseInt(a.match(/issue-(\d+)/)?.[1])||0;const numB=parseInt(b.match(/issue-(\d+)/)?.[1])||0;return numB-numA})}function fetchWithTimeout(url,options={},timeout=FETCH_TIMEOUT){return Promise.race([fetch(url,options),new Promise((_,reject)=>setTimeout(()=>reject(new Error('请求超时')),timeout))])}async function loadAndDisplayMarkdown(filename){state.currentFile=filename;updateDocumentTitle(filename);showLoadingState();if(state.fileCache.has(filename)){renderMarkdown(state.fileCache.get(filename),filename);updateURL(filename);return}const markdown=await loadMarkdownFile(filename);state.fileCache.set(filename,markdown);renderMarkdown(markdown,filename);updateURL(filename)}function updateDocumentTitle(filename){document.title=`${filename.replace('.md','').replace('Markdown/','')}-Markdown文档`}async function loadMarkdownFile(filename){const response=await fetchWithTimeout(`${GITHUB_API_URL}/${filename}`,{headers:{'Accept':'application/vnd.github.v3.raw'}},FETCH_TIMEOUT);if(!response.ok){throw new Error(`文件加载失败:${response.status}${response.statusText}`)}return await response.text()}function updateURL(filename){const url=new URL(window.location);url.searchParams.set('file',filename);window.history.pushState({file:filename},'',url)}function renderMarkdown(markdown,filename){const processedMarkdown=preprocessCodeContainers(markdown);const html=marked.parse(processedMarkdown);elements.markdownContent.innerHTML=`<div class="markdown-file"><h1 class="file-title">${filename.replace('.md','').replace('Markdown/','')}</h1>${html}</div>`;addHeadingIds();generateTOC();setupCodeContainers();displayFileListInBackground();setTimeout(()=>{highlightVisibleHeading()},100)}function preprocessCodeContainers(markdown){const containerRegex=/(```container:([^\n]+)\n([\s\S]*?)\n```(\s*))+/g;return markdown.replace(containerRegex,(match)=>{const blocks=match.trim().split('\n```container:').filter(Boolean);const containerId=`code-container-${Math.random().toString(36).substr(2,9)}`;let html=`<div class="code-container"id="${containerId}"><div class="code-tabs"></div>`;blocks.forEach((block,index)=>{const contentStart=index===0?block.indexOf('\n')+1:0;const contentEnd=block.lastIndexOf('\n```');let title,content;if(index===0){title=block.substring('```container:'.length,block.indexOf('\n')).trim();content=contentEnd>0?block.substring(contentStart,contentEnd).trim():block.substring(contentStart).trim()}else{title=block.substring(0,block.indexOf('\n')).trim();content=contentEnd>0?block.substring(block.indexOf('\n')+1,contentEnd).trim():block.substring(block.indexOf('\n')+1).trim()}html+=`<div class="code-content"data-title="${title}"><pre><code>${content}</code></pre></div>`});html+='</div>';return html})}function setupCodeContainers(){const containers=document.querySelectorAll('.code-container');containers.forEach(container=>{const tabsContainer=container.querySelector('.code-tabs');const contentBlocks=container.querySelectorAll('.code-content');const titles=Array.from(contentBlocks).map(block=>block.dataset.title);titles.forEach((title,index)=>{const tab=document.createElement('div');tab.className=`code-tab ${index===0?'active':''}`;tab.textContent=title;tab.dataset.index=index;tab.addEventListener('click',()=>{container.querySelectorAll('.code-tab').forEach(t=>t.classList.remove('active'));tab.classList.add('active');container.querySelectorAll('.code-content').forEach(c=>c.classList.remove('active'));contentBlocks[index].classList.add('active')});tabsContainer.appendChild(tab)});if(contentBlocks.length>0){contentBlocks[0].classList.add('active')}})}async function displayFileListInBackground(){const files=await getMarkdownFiles();displayFileList(files);updateActiveFileLink()}function displayFileList(files){elements.filesContainer.innerHTML='';const fragment=document.createDocumentFragment();files.forEach(file=>{const li=document.createElement('li');const a=document.createElement('a');a.href='#';a.textContent=file.replace('.md','').replace('Markdown/','');a.dataset.file=file;li.appendChild(a);fragment.appendChild(li)});elements.filesContainer.appendChild(fragment)}function updateActiveFileLink(clickedLink=null){const currentFile=getCurrentFileFromURL();document.querySelectorAll('#files a').forEach(el=>{el.classList.toggle('active',el.dataset.file===currentFile)});if(clickedLink){clickedLink.classList.add('active')}}function addHeadingIds(){const headings=document.querySelectorAll('#markdown-content h1, #markdown-content h2, #markdown-content h3');headings.forEach((heading,index)=>{if(!heading.id){heading.id=generateHeadingId(heading.textContent,index)}})}function generateHeadingId(text,index){return text.trim().toLowerCase().replace(/[^\w\s-]/g,'').replace(/\s+/g,'-').replace(/-+/g,'-')||`heading-${index}`}function generateTOC(){elements.tocList.innerHTML='';const headings=document.querySelectorAll('#markdown-content h1, #markdown-content h2, #markdown-content h3');const fragment=document.createDocumentFragment();headings.forEach((heading,index)=>{const li=document.createElement('li');li.className=heading.tagName.toLowerCase();li.innerHTML=`<a href="#${heading.id}">${heading.textContent}</a>`;fragment.appendChild(li)});elements.tocList.appendChild(fragment)}function scrollToHeading(heading){const offset=20;const elementPosition=heading.getBoundingClientRect().top;const offsetPosition=elementPosition+window.pageYOffset-offset;window.scrollTo({top:offsetPosition,behavior:'smooth'});if(history.replaceState){history.replaceState(null,null,`#${heading.id}`)}else{window.location.hash=`#${heading.id}`}}function highlightVisibleHeading(){const headings=document.querySelectorAll('#markdown-content h1, #markdown-content h2, #markdown-content h3');let currentActive=null;const offset=100;let closestHeading=null;let closestDistance=Infinity;headings.forEach(heading=>{const rect=heading.getBoundingClientRect();const distance=Math.abs(rect.top-offset);if(rect.top<=offset*2&&rect.bottom>=0){if(distance<closestDistance){closestDistance=distance;closestHeading=heading}}});if(closestHeading){currentActive=closestHeading.id}else if(headings.length>0){if(window.scrollY<50){currentActive=headings[0].id}else{for(let i=headings.length-1;i>=0;i--){if(headings[i].getBoundingClientRect().top<offset){currentActive=headings[i].id;break}}}}if(currentActive&&currentActive!==state.lastActiveHeading){const activeLink=document.querySelector(`#toc a[href="#${currentActive}"]`);setActiveTocItem(activeLink);state.lastActiveHeading=currentActive}}function setActiveTocItem(activeLink) {
    if (!activeLink) return;
    
    // 更新活动状态
    document.querySelectorAll('#toc a').forEach(el => {
        el.classList.toggle('active', el === activeLink);
    });
    
    // 获取TOC容器和列表元素
    const tocContainer = document.getElementById('toc');
    const tocList = document.getElementById('toc-list');
    
    // 计算需要滚动到的位置
    const linkPosition = activeLink.offsetTop;
    const linkHeight = activeLink.offsetHeight;
    const containerHeight = tocContainer.clientHeight;
    
    // 计算目标滚动位置，使链接位于容器中间
    const scrollTo = linkPosition - (containerHeight / 2) + (linkHeight / 2);
    
    // 只滚动TOC列表，不滚动整个页面
    tocList.scrollTo({
        top: scrollTo,
        behavior: 'smooth'
    });
}function showLoadingState(){elements.markdownContent.innerHTML=`<div class="loading-container"><div class="loader"></div><span>加载中...</span></div>`}function toggleFileList(){state.isMobileMenuOpen=!state.isMobileMenuOpen;elements.fileList.classList.toggle('active',state.isMobileMenuOpen)}function closeFileList(){state.isMobileMenuOpen=false;elements.fileList.classList.remove('active')}return{init}})();document.addEventListener('DOMContentLoaded',MarkdownViewer.init);</script></body></html>